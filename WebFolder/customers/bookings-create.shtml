<!DOCTYPE html>
<html lang="en">

<head>

    <!--#4DSCRIPT/webRedirectIfNotAuthorized-->
    <!--#4DSCRIPT/WAPI_4DInclude/customers/include/head.shtml-->
    <!--#4DIF true -->
    <!--#4DSCRIPT/WAPI_pageStart/{onload:true, sessiontimer:true}-->
    <!--#4DELSE-->
    <!--#4DSCRIPT/WAPI_pageStart/{onload:true, sessiontimer:true, dropzone-div:bookings-form-create}-->
    <!--#4DENDIF-->

    <!--   <script type="text/javascript">
        //document.getElementById('expiretimer').innerHTML =05 + ":" + 00;
        //startTimer();

        function startTimer() {
            var presentTime = document.getElementById('expiretimer').innerHTML;
            if (presentTime == " ") {
                presentTime = "05:00";
            } else {
                if (presentTime == "") {
                    presentTime = "05:00";
                }
            };

            var timeArray = presentTime.split(/[:]+/);
            var m = timeArray[0];
            var s = checkSecond((timeArray[1] - 1));

            if (s == 59) {
                m = m - 1
            }

            if (m < 0) {
                wapiObjectMethod() //refresh the form
                m = 1;
                s = 00;
                document.getElementById('expiretimer').innerHTML = "";
            } else {
                document.getElementById('expiretimer').innerHTML = m + ":" + s;
                if (timer === undefined) {
                    var timer = setTimeout(startTimer, 5000);
                }
            }
        }

        function checkSecond(sec) {
            if (sec < 10 && sec >= 0) {
                sec = "0" + sec
            }; // add zero in front of numbers < 10
            if (sec < 0) {
                sec = "59"
            };
            return sec;
        }

    </script>
-->
</head>

<body>

    <!--#4DSCRIPT/WAPI_4DInclude/customers/include/menubar.shtml-->

    <main role="main">

        <!--#4DSCRIPT/webSelectCustomerRecord-->
        <!--#4DHTML WAPI_includeAlertMessage-->
        <div class="page-header hidden-xs">
            <!-- JUMBOTRON - WELCOME -->
            <div class='container'>

                <h1>Request a Booking </h1>
                <h4>
                    <!--#4DSCRIPT/WAPI_textGroup/{field:customers___fullname}-->
                </h4>
            </div>
        </div>


        <div class="container content">
            <!--Row with two equal columns-->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                    <form id='bookings-form-create' action="customers/createRecord" method="post">

                        <!--#4DSCRIPT/WAPI_formHeader/{table:bookings, field1:customers___customerid, success:/customers/home.shtml, failure:/customers/home.shtml}-->

                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"><span class="fa fa-book fa-2x" aria-hidden="true"></span>&nbsp;&nbsp; Booking Request </h3>
                            </div>
                            <div class="panel-body">

                                <div class="form-group" style="display: none">
                                    <!--#4DSCRIPT/WAPI_formGroup/{variable:<>basecurrency, addonimage:<>basecurrencyflag, label:Local-Currency, readonly:true}-->
                                </div>

                                <div class="form-group">
                                    <label id="bookings-issell-label" for="bookings-issell-input">I would like to Buy or Sell</label>
                                    <select class="form-control" id="bookings-issell-input" name="bookings-issell-input" onchange="wapiObjectMethod(event)">
                                        <option value="true" selected>Buy</option>
                                        <!--customer buy is an us sell -->
                                        <option value="false">Sell</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <!-- need to sort the currency array -->
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___currency, label:Currency, choicelist:webGetChoiceListcurrency, onchange:wapiObjectMethod}-->
                                </div>

                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___paymentmethod, label:Payment-Method, choicelist:paymentmethods, readonly:false}-->
                                </div>

                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___amount, label:Amount, inputmask:currency, onchange:wapiObjectMethod, placeholder:Enter-the-amount-to-buy, addon-pre-image:<>basecurrencyflag, addon-post:NZD }-->
                                </div>

                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___settlementmethod, label:Settlement-Method, choicelist:paymentmethods, readonly:false}-->
                                </div>

                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___isopenbooking, label:Is-Open-Booking, onchange:wapiObjectMethod, readonly:false}-->
                                </div>

                                <div class="form-group" id="open-booking-notification" style="display: none">
                                    <!--#4DSCRIPT/webGetKeyValue/web.customers.openbookings.terms-->
                                </div>

                                <div id="rate-group">
                                    <div class="form-group">
                                        <div class="pull-right"><span id='rateRefresh' class="glyphicon glyphicon-refresh" onclick="wapiObjectMethod(event)"></span></div>
                                        <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___ourrate, label:Rate, readonly:true, addon-post:ALL/CAD}-->

                                        <div><span class='text-muted' id='bookings-currency-rate-inverse'></span><span id='bookings-currency-rate-updated' class='text-muted small pull-right' style='padding-top:4px'> Updated: </span> </div>
                                    </div>

                                    <div class="form-group">
                                        <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___feelocal, label:Booking-fees, readonly:true, inputmask:currency, addon-pre-image:<>basecurrencyflag, addon-post:CAD}-->
                                    </div>

                                    <div class="form-group">
                                        <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___amountlocal, label:Local-cost, readonly:true, inputmask:currency, addon-pre-image:<>basecurrencyflag, addon-post:CAD}-->
                                    </div>

                                </div>

                                <!--SOURCE AND PURPOSE WILL BE STORED IN INTERNAL REMARKS FOR NOW-->
                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___ourremarks, label:Purpose, readonly:false, placeholder:Purpose-of-transaction, onchange:wapiObjectMethod, required:true, choicelist:webgetchoicelistpurposetrans}-->
                                </div>

                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___autocomments, label:Source-of-funds, placeholder:Source-of-funds, readonly:false, required:true, onchange:wapiObjectMethod, choicelist:webgetchoicelistsourcefunds}-->
                                </div>


                                <div class="form-group">
                                    <!--#4DSCRIPT/WAPI_formGroup/{field:bookings___customerremarks, label:Comments, placeholder:Comments}-->
                                </div>


                            </div>
                        </div>

                        <div class="panel panel-default">

                            <div class='panel-heading'>Terms and Conditions</div>

                            <div class='panel-body'>
                                <div>
                                    <!--#4DIF false-->
                                    <!--#4DHTMLVAR <>BOOKINGDISCLAIMER-->
                                    <!--#4DENDIF-->
                                    <!--#4DSCRIPT/webGetKeyValue/web.customers.bookings.terms-->
                                </div>
                                <div class="form-check" style="padding-top: 10px">
                                    <label class="form-check-label" for="agreement-input">
                                        <input type="checkbox" class="form-check-input" id="agreement-input" name="agreement-input" onchange="wapiObjectMethod(event)">
                                        By checking this you agree to the terms specified above</label>
                                </div>
                            </div>

                            <div class='panel-footer clearfix'>
                                <div class='text-muted' style="padding-bottom: 8px">
                                    <span id='expirewarning'></span>
                                    <span class='pull-right' id='expiretimer'></span>
                                </div>

                                <div class="pull-right">
                                    <a class="btn btn-default" href="/customers/home.shtml" role="button">Cancel</a>

                                    <input type="button" type='submit' class="btn btn-primary" id="submit-input" name="submit-input" form="bookings-form-create" onclick="wapiValidateOnSubmit()" disabled value="Book It">
                                </div>
                            </div>
                        </div>

                        <p></p>
                    </form>

                </div>

            </div>

        </div>

        <div class="modal fade" id="timerAlert" role='dialog'>
            <!-- might be able to remove this -->
            <div class="modal-dialog">

                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                        <h4 class="modal-title">Rates have refreshed.</h4>
                    </div>

                    <div class="modal-body">
                        <p id='timerAlertText'></p>
                    </div>
                    <div class="modal-footer">
                        <a href="#" data-dismiss="modal" class="btn btn-default">Close</a>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <!--#4DSCRIPT/WAPI_4DInclude/customers/include/footer.shtml-->
</body>



</html>
