<!DOCTYPE html>
<html lang="en">

<head>


    <!--#4DSCRIPT/WAPI_4DInclude/agents/include/head.shtml-->
    <!--#4DSCRIPT/WAPI_pageStart/{onload:true, sessiontimer:true, dropzone-div:ewires-form-update}-->

</head>

<body>

    <!--#4DSCRIPT/WAPI_4DInclude/agents/include/menubar.shtml-->
    <main>
        <div class="page-header">

            <div class='container'>

                <!--#4DSCRIPT/webSelectAgentRecord-->

                <!--#4DHTML WAPI_includeAlertMessage-->
                <script src="/app/js/bootstrap-auto-dismiss-alert.js"></script>
                <!--MUST COME AFTER THE ALERT YOU WANT TO CLOSE -->

                <h1>Update and Approve eWire</h1>

            </div>
        </div>

        <div class="container content">

            <!--Row with two equal columns-->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                    <form class="" enctype="multipart/form-data" id='ewires-form-update' action="/agents/updateRecord" method="post">

                        <!--#4DSCRIPT/WAPI_formHeader/{table:ewires, primarykey:ewires___ewireid, field1:ewires___fromcurrency, field2:ewires___currency,  success:/agents/ewires-confirmation.shtml, failure:/agents/ewires-update.shtml, print:agents/ewires-confirm-print.shtml}-->

                        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable='true'>

                            <!-- SENDER-CUSTOMER INFORMATION -->
                            <div class="panel panel-default">

                                <div class="panel-heading" role="tab" id="customer-tab">
                                    <h3 class="panel-title">
                                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#customer-data" aria-expanded="false" aria-controls="customer-data">
                                            <span class="glyphicon glyphicon-user" aria-hidden="true"> </span> Sending Party</a>
                                        <div class='pull-right'>
                                            <div id='customer-tab-status'>[
                                                <!--4DTEXT [ewires]sendername-->]</div>
                                        </div>
                                    </h3>
                                </div>

                                <div id="customer-data" class="panel-collapse collapse" role="tabpanel" aria-labelledby="customer-tab">

                                    <div class="panel-body">

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___linkid, label:Link-ID, readonly:true}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___sendername, label:Sender, readonly:true,  onchange:wapiObjectMethod}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___senderaddress, label:Sender-Address, placeholder:Address, readonly:true}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___sendercity, label:Sender-City, placeholder:City, readonly:true, width:100}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___senderemail, label:Sender-Email, placeholder:Email, readonly:true, width:100, inputmask-alias:email}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___senderphone, label:Sender-Phone, placeholder:Main-Phone, readonly:true, width:100}-->
                                        </div>

                                    </div>
                                </div>
                            </div>


                            <!-- BENEFICIARY INFORMATION -->
                            <div class="panel panel-default">

                                <div class="panel-heading" role="tab" id="beneficiary-tab">
                                    <div class='media'>
                                        <div class="media-body">
                                            <h3 class="panel-title">
                                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#beneficiary-data" aria-expanded="false" aria-controls="beneficiary-data">
                                                    <span class="glyphicon glyphicon-user" aria-hidden="true"> </span> Receiving Party (Beneficiary) </a>
                                                <div class='pull-right'>
                                                    <div id='beneficiary-tab-status'></div>
                                                </div>
                                            </h3>
                                        </div>
                                    </div>
                                </div>

                                <div id="beneficiary-data" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="beneficiary-tab">

                                    <div class="panel-body">
                                        <!-- Beneficiary from agent is the Customer, Sender is the Link -->

                                        <!--BENEFICIARY -->

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiaryfullname, label:Beneficiary-Name, placeholder:Full-Name, readonly:true, width:100, onchange:wapiObjectMethod}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiaryaddress, label:Beneficiary-Address, placeholder:Address, readonly:true}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiarycity, label:Beneficiary-City, placeholder:City, readonly:true, width:100}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiaryemail, label:Beneficiary-Email, placeholder:Email, readonly:false, width:100, inputmask-alias:email}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiarycellphone, label:Cell-Phone, placeholder:Beneficiary-Cell-Phone, readonly:false, width:100}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:eWires___Beneficiaryrelationship, label:Relationship, placeholder:Beneficiary-Relationship, readonly:true, width:100}-->
                                        </div>

                                    </div>
                                </div>
                            </div>


                            <!-- SEND AN EWIRE INFORMATION -->
                            <div class="panel panel-default">

                                <div class="panel-heading" role="tab" id="destination-tab">
                                    <h3 class="panel-title">
                                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#destination-data" aria-expanded="true" aria-controls="destination-data">
                                            <span class="glyphicon glyphicon-send" aria-hidden="true"> </span> eWire Amounts</a>
                                        <div id='destination-tab-status' class="pull-right"></div>
                                    </h3>
                                </div>

                                <div id="destination-data" class="panel-collapse collapse" role="tabpanel" aria-labelledby="destination-tab">


                                    <div class="panel-body">

                                        <!--4DIF (true)-->
                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___fromcountrycode, label:From-Country, readonly:true, width:100}-->
                                        </div>
                                        <!--4DENDIF-->

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___tocountrycode, label:Destination-Country, choicelist:webGetChoiceListCountries, onchange:wapiObjectMethod, readonly:true, required:true, width:100}-->
                                        </div>

                                        <div class="form-group">
                                            <!-- DESTINATION-ACCOUNT-ID - [ACCOUNTS] -- need to sort the currency array -->
                                            <!--[accounts]currencyAlias links us to the correct [Currency] to use it's sell rate-->
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___accountid, label:Destination-Account, onchange:wapiObjectMethod, choicelist:webGetChoiceListDummy, readonly:true, required:true}-->
                                        </div>

                                        <div class="form-group">
                                            <!-- COUNTER-ACCOUNT-ID - [ACCOUNTS] -- need to sort the currency array -->
                                            <!--[accounts]currencyAlias links us to the correct [Currency] to use it's sell rate-->
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___counteraccountid, label:Agent-Account, onchange:wapiObjectMethod, readonly:true, choicelist:webGetChoiceListDummy, required:true}-->
                                        </div>

                                        <!-- FEES -->
                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___sourceservicefeelocal, step:0.01, label:Local-service-fee, readonly:true, choicelist:webGetChoicelistFeeStructure, choicelistselected:25, onchange:wapiObjectMethod, required:false, addon-pre:glyphicon-usd, addon-pre-image:<>basecurrencyflag, addon-post:ALL }-->
                                        </div>

                                        <!-- SENDING AMOUNT -->
                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___toamount, step:0.01, label:To-amount, readonly:false, addonimage:<>basecurrencyflag, addon-pre-image:<>basecurrencyflag, addon-post:ALL, onchange:wapiObjectMethod, required:true, inputmask-alias:currency, inputmask-greedy:false}-->
                                        </div>


                                        <!--EXCHANGE RATE AND INVERSE RATE -->
                                        <div class="form-group">
                                            <div class="pull-right"><span id='rateRefresh' class="glyphicon glyphicon-refresh" onclick="wapiObjectMethod(event)"></span></div>

                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___sourcerate, step:0.00001, label:Rate, readonly:false, addon-post:ALL/ALL, required:true, onchange:wapiObjectMethod}-->
                                        </div>

                                        <!--#4DIF False-->
                                        <div class='form-group'>

                                            <label class="form-control-label" for='ewires-sourcerate-input-inverse' id='ewires-sourcerate-input-inverse-label'>Inverse Rate</label>

                                            <div class="input-group">
                                                <input type='number' class="form-control" id='ewires-sourcerate-input-inverse' value='' name='ewires-sourcerate-input-inverse' onchange='wapiObjectMethod(event)' step="0.00001">

                                                <div id='ewires-sourcerate-addon-post-inverse' class="input-group-addon">NZD/FJD</div>
                                            </div>

                                            <div id='ewires-sourcerate-input-error-inverse'></div>

                                            <div><span class='text-muted' id='ewires-sourcerate-inverse'>
                                                </span>
                                                <span id='ewires-currency-rate-updated' class='text-muted small pull-right' style='padding-top:4px'> Updated: </span> </div>
                                        </div>
                                        <!--#4DENDIF-->


                                        <!--LOCAL AMOUNT INCLUSIVE OF FEES -->
                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___amountlocal, step:0.01, label:Total-Local-Amt-Due, readonly:true, onchange:wapiObjectMethod, addon-pre:glyphicon-usd, addon-pre-image:<>basecurrencyflag, addon-post:ALL, inputmask-alias:currency, inputmask-greedy:false}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___frommop, label:Method-of-payment-received, placeholder:Method-of-payment-received, readonly:false, width:100, choicelist:webGetChoiceListMOP, required:true}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___tomop, label:Delivery-payment-method, placeholder:Delivery-payment-method, readonly:false, width:100, choicelist:webGetChoiceListMOP}-->
                                        </div>



                                    </div>
                                </div>
                            </div>


                            <!-- DELIVERY INFORMATION -->
                            <div class="panel panel-default">

                                <div class="panel-heading" role="tab" id="delivery-tab">
                                    <h3 class="panel-title">
                                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#delivery-data" aria-expanded="false" aria-controls="delivery-data">
                                            <span class="glyphicon glyphicon-plane" aria-hidden="true"> </span> Delivery</a>
                                        <div id='delivery-tab-status' class="pull-right"></div>
                                    </h3>
                                </div>

                                <div id="delivery-data" class="panel-collapse collapse" role="tabpanel" aria-labelledby="delivery-tab">

                                    <div class="panel-body">

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___dotransfertobank, label:Direct-deposit-to-bank, readonly:true, onchange:wapiObjectMethod}-->
                                        </div>

                                        <div id='delivery-hidden' style='display: none'>
                                            <div class="form-group">
                                                <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiarybankname, label:Bank-name, readonly:true, placeholder:Bank-name, width:100}-->
                                            </div>

                                            <div class="form-group">
                                                <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiarybankaccountno, label:Account-No/IBAN, placeholder:Bank-account-or-IBAN, readonly:true, width:100}-->
                                            </div>

                                            <div class="form-group">
                                                <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiarybanktransitcode, label:Transit-No, placeholder:Transit-number, readonly:true, width:100}-->
                                            </div>

                                            <div class="form-group">
                                                <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___beneficiarybankdetails, label:Other-Banking-Details, placeholder:Other-banking-details, readonly:false}-->
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                            <!-- AML INFORMATION -->
                            <div class="panel panel-default">

                                <div class="panel-heading" role="tab" id="aml-tab">
                                    <h3 class="panel-title">
                                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#aml-data" aria-expanded="false" aria-controls="aml-data">
                                            <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"> </span> Purpose</a>
                                        <div id='aml-tab-status' class="pull-right"></div>
                                    </h3>
                                </div>

                                <div id="aml-data" class="panel-collapse collapse" role="tabpanel" aria-labelledby="aml-tab">

                                    <div class="panel-body">

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___purposeoftransaction, label:Purpose, readonly:true, placeholder:Purpose-of-transaction, onchange:wapiObjectMethod, required:true, choicelist:webgetchoicelistpurposetrans}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___amlsourceoffunds, label:Source-of-funds, placeholder:Source-of-funds, readonly:true, required:true, choicelist:webgetchoicelistsourcefunds}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___isthirdpartyinvolved, label:Is-payment-for-a-third-party?, readonly:false, onchange:wapiObjectMethod}-->
                                        </div>

                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___thirdpartydetails, label:Third-party-recipient, placeholder:Third-party-recipient-details, readonly:true}-->
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <!-- ATTACHMENTS INFORMATION -->
                            <div class="panel panel-default">

                                <div class="panel-heading" role="tab" id="attachments-tab">
                                    <h3 class="panel-title">
                                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#attachments-data" aria-expanded="false" aria-controls="attachments-data">
                                            <span class="glyphicon glyphicon-paperclip" aria-hidden="true"> </span> Attachments</a>
                                        <div id='attachments-tab-status' class="pull-right"></div>
                                    </h3>
                                </div>

                                <div id="attachments-data" class="panel-collapse collapse" role="tabpanel" aria-labelledby="attachments-tab">

                                    <div class="panel-body">

                                        <!--#4DIF false-->
                                        <div class="form-group">
                                            <!--#4DSCRIPT/WAPI_formGroup/{field:ewires___attachedpicture, label:Attachments, placeholder:Attachments, readonly:false, width:100, image-upload:true}-->
                                        </div>
                                        <!--#4DENDIF-->

                                        <!--#4DIF False-->
                                        <div class="form-group" id='file-input-group'>
                                            <!-- need to build a image/doc upload area that can load to disk on server
                            and then pass that info to a hook method were we can associate with a record 
                            would like to allow meta data to be entered by user -->

                                            <div class="media-body" for="sample-file" id="sample-label"> <label class="media-heading form-control-label">Attachments : test to disk 1</label></div>

                                            <div style="padding-top: 10px;">
                                                <input class="form-control" id="sample-file" name="sample-file" type="file" accept="image/x-png,image/gif,image/jpeg" style="display: block" onchange="$('#file-input-group').clone(true).appendTo('.panel-body');">


                                            </div>
                                            <div id="sample-file-error"></div>
                                            <div>
                                                <button type="button" class="btn btn-default btn-xs pull-right"><span class='glyphicon glyphicon-trash'></span> </button>
                                            </div>
                                        </div>
                                        <!--#4DENDIF-->


                                        <!-- DROPZONE AREA FOR ADDITIONAL ATTACHMENTS -->
                                        <div class="row" id="wapi-dropzone-group">
                                            <div class="dz-clickable dropzone-previews" id="wapi-dropzone">
                                                <div class="dz-message text-center" style="padding-bottom: 12px">
                                                    <h3><span class="label label-default">Click or Drop Files Here to Attach</span></h3>
                                                </div>
                                            </div>

                                            <div class="form-group fallback">
                                                <input id='dropzone-upload-file' type="file" multiple />
                                            </div>
                                        </div>



                                        <!-- PREVIOUSLY SUBMITTED ATTACHMENTS -->
                                        <!--#4DSCRIPT/webSelectRelatedWebAttachments/[ewires]-->

                                        <div class="well">
                                            <div class="row row-eq-height">
                                                <!--#4DLOOP [WebAttachments]-->
                                                <div class="col-sm-3">
                                                    <!--#4DSCRIPT/wapi_formMediaGroup/{field-preview:webattachments___preview, field-id:webattachments___uuid, field-path:webattachments___filepath, field-description:webattachments___description, field-name:webattachments___filename, readonly:true}-->
                                                </div>
                                                <!--#4DENDLOOP-->

                                            </div>
                                        </div>
                                        <div class="text-centered">*Previously submitted attachments</div>


                                    </div>
                                </div>
                            </div>


                        </div>



                        <!-- AGENT APPROVAL -->
                        <div class="panel panel-default">


                            <div class="panel-heading" role="tab" id="terms-tab">
                                <h3 class="panel-title">
                                    Update Confirmation
                                </h3>
                            </div>


                            <div class='panel-body'>

                                <div class='form-group'>
                                    <label class="form-control-label" for="ewires-isapproved-input" id='ewires-isapproved-label'>Update eWire Status: </label>

                                    <select class="form-control-input" id="ewires-isapproved-input" name="ewires-isapproved-input" onchange="wapiObjectMethod(event)">
                                        <option value="1" selected="selected">Pending</option>
                                        <option value="2">Approved</option>
                                        <option value="-2">Not Approved</option>
                                    </select>
                                    <div id='ewires-isapproved-input-error'></div>
                                </div>


                                <div>
                                    <!--#4DHTMLVAR <>WIREDISCLAIMER-->
                                </div>
                                <div class="form-check" style="padding-top: 10px">
                                    <label class="form-check-label" for="agreement-input">
                                        <input type="checkbox" class="form-check-input" id="agreement-input" name="agreement-input" onchange="wapiObjectMethod(event)">
                                        By checking this you agree to the terms specified above</label>
                                </div>

                            </div>

                            <div class='panel-footer clearfix'>
                                <input class="btn btn-primary" type="button" value="Print" form="ewires-form-update" onclick="wapiPrintForm();" />

                                <div class="pull-right">
                                    <!--4DIF WAPI_isDebug -->
                                    <input class="btn btn-primary" type="button" value="Print-Debug" form="ewires-form-update" onclick="wapiPrintForm(true);" />
                                    <!--4DENDIF-->

                                    <a class="btn btn-default" href="/agents/home.shtml" role="button">Cancel</a>

                                    <!--#4DIF true-->
                                    <input type="button" type='submit' class="btn btn-primary" id="submit-input" name="submit-input" onclick="wapiValidateOnSubmit()" disabled value="Update eWire">
                                    <!--#4DELSE-->
                                    <input type="button" type='submit' class="btn btn-primary" id="submit-input" name="submit-input" disabled value="Send eWire">
                                    <!--#4DENDIF-->
                                </div>
                                <!-- </div> -->
                            </div>

                        </div>

                        <!--#4DSCRIPT/WAPI_formFooter/{table:ewires}-->

                    </form>

                </div>
            </div>

        </div>


    </main>


    <!--#4DSCRIPT/WAPI_4DInclude/agents/include/footer.shtml-->
    <!--#4DSCRIPT/WAPI_4DInclude/agents/include/dz_preview.shtml-->
    <!--#4DSCRIPT/WAPI_formInit-->

</body>



</html>
